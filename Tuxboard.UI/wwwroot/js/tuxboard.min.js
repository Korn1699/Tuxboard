(function(){function i(n){return n.getAttribute("data-id")}function rt(n){return document.querySelector(`[data-id='${n}']`)}function eu(n){return n.querySelector(it)}function ou(n){return i(n)}function g(){return document.querySelector(vi+"[data-active='true']").attributes["data-id"]}function y(){return document.getElementsByClassName("dashboard").item(0)}function su(){return y().getElementsByClassName(r(a))}function hu(n){var t=e(n,r(at));return i(t)}function gt(n){return parseInt(n.getAttribute("data-column"))}function cu(n){return e(n,r(a))}function ni(){return y().getElementsByClassName(u)}function f(){return document.getElementById(pi)}function ut(){return f().querySelector(ki)}function ft(){return ut().children}function lu(){return f().querySelector(kt)}function au(){return p().querySelector(tr)}function p(){return document.getElementById(tt)}function ti(){return p().querySelector(ir)}function vu(n){return n.classList.contains(w)}function yu(){return p().querySelectorAll(bt)}function et(){return p().querySelectorAll(bt+er)}function r(n){return n.startsWith(".")?n.replace(".",""):n}function pu(n){let t=n.querySelectorAll(hr);return Array.from(t).map(n=>({WidgetSettingId:i(n),Value:n.value}))}function wu(n,t){var i;if(t.parentNode===n.parentNode)for(i=n.previousSibling;i;i=i.previousSibling)if(i===t)return!0;return!1}function bu(n){return n.target.tagName.toLowerCase()==="li"&&n.target.classList.contains(di)}function ku(n){const t=e(n,r(a)),f=t.getElementsByClassName(u),o=e(n,r(at));return{PlacementId:i(n.target),Column:gt(t),LayoutRowId:i(o),PlacementList:Array.from(f).map(function(n,t){return{PlacementId:i(n),Index:t}})}}function du(){const n=f();return n.querySelector(wi)}function gu(n){return n.getElementsByClassName(rr).item(0)}function nf(n){const t=f().querySelector(pt);t.innerHTML=n}function tf(n){const t=p().querySelector(pt);t.innerHTML=n}function rf(n){n.classList.remove("disabled");n.removeAttribute("disabled")}function uf(n){n.classList.add("disabled");n.setAttribute("disabled","disabled")}function e(n,t){let i=n.target;if(i.classList.contains(t))return i;while(i.parentNode!==null&&!i.classList.contains(t))i=i.parentNode;return i}function ot(n,t){return n?n.classList.contains(t)?n:ot(n.parentElement,t):!1}function st(n,t){let i=n.target;if(i.tagName.toLowerCase()===t.toLowerCase())return i;while(i.parentNode!==null&&i.tagName.toLowerCase()!==t.toLowerCase())i=i.parentNode;return i}function ii(n){return n?n.tagName.toLowerCase()==="div"&&n.classList.contains(u)&&i(n)!=="":!1}function ff(){function n(n){n.stopPropagation&&n.stopPropagation();n.dataTransfer.effectAllowed="move";h=n.target;b||(b=gt(cu(n)));k||(k=hu(n));const t=h.attributes["data-id"].value;n.dataTransfer.setData("text",t)}function t(n){return n.preventDefault&&n.preventDefault(),n.stopPropagation&&n.stopPropagation(),n.dataTransfer.dropEffect="move",ii(n.target)}function i(n){n.preventDefault&&n.preventDefault();n.stopPropagation&&n.stopPropagation();n.target.classList.add("over")}function f(n){n.preventDefault&&n.preventDefault();n.stopPropagation&&n.stopPropagation();n.target.classList.remove("over")}function e(n){n.preventDefault&&n.preventDefault();n.stopPropagation&&n.stopPropagation();const i=n.target,t=ot(n.target,r(a));if(t)if(ii(i))t.insertBefore(h,i);else{const n=ot(i,r(u));n?t.insertBefore(h,n):t.append(h)}}function o(n){n.preventDefault&&n.preventDefault();n.stopPropagation&&n.stopPropagation();n.target.style.opacity="";const t=document.getElementsByClassName(r(a));[].forEach.call(t,function(n){n.classList.remove("over")});of(n);n.dataTransfer.clearData();h=null;b=null;k=null}for(const r of su())r.addEventListener("dragstart",n,!1),r.addEventListener("dragover",t,!1),r.addEventListener("dragenter",i,!1),r.addEventListener("dragleave",f,!1),r.addEventListener("drop",e,!1),r.addEventListener("dragend",o,!1)}function o(n){if(t&&console.log(n),!n.ok)throw Error(n.statusText);return n}function c(n){return t&&console.log(n),n.json()}function l(n){return t&&console.log(n),n.text()}function n(n){t&&console.log("Issue w/ fetch call: \n",n)}function ef(){}function of(t){const i=ku(t),r={Column:i.Column,PreviousColumn:b,PreviousLayout:k,PlacementId:i.PlacementId,LayoutRowId:i.LayoutRowId,PlacementList:i.PlacementList};fetch(dr,{method:"put",body:JSON.stringify(r),headers:{"Content-Type":"application/json"}}).then(o).then(c).then(ef).catch(n)}function sf(n){if(n.success){const t=y().querySelector("[data-id='"+n.id+"']");t&&t.remove()}}function hf(t){const r=st(t,"button"),u=i(r),f=g().value,e={TabId:f,PlacementId:u};fetch(gr,{method:"delete",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then(o).then(c).then(sf).catch(n)}function cf(){}function ri(t,r){const u={Id:i(t),Collapsed:r};fetch(kr,{method:"post",body:JSON.stringify(u),headers:{"Content-Type":"application/json"}}).then(o).then(c).then(cf).catch(n)}function lf(n,t){const i=rt(n);if(i){const n=i.querySelector(".card-body");n&&(n.innerHTML=t)}}function ui(r){const u=i(r);if(u){const f={WidgetPlacementId:u};ci(r);fetch(nu+i(r),{method:"get"}).then(o).then(l).then(function(n){t&&console.log(n);lf(f.WidgetPlacementId,n);li(r)}).catch(n)}}function af(n){const t=document.getElementById(tt),i=t.querySelector(kt);tf(n);ye();i.style="display:none"}function vf(){fetch(yr,{method:"get"}).then(o).then(l).then(af).catch(n)}function yf(n){n.status==200&&(v&&v.hide(),fi())}function pf(t,i){const r={TabId:t,WidgetId:i};fetch(wr,{method:"post",body:JSON.stringify(r),headers:{"Content-Type":"application/json"}}).then(o).then(yf).catch(n)}function wf(n){const t=y();t.innerHTML=n;ai()}function fi(){fetch(br,{method:"get"}).then(o).then(l).then(wf).catch(n)}function bf(n){t&&console.log(n);pe(n)}function kf(){fetch(cr+g().value,{method:"post"}).then(l).then(bf).catch(n)}function df(n){t&&console.log(n);de(n)}function gf(t){fetch(lr+t,{method:"post"}).then(l).then(df).catch(n)}function ne(n,i){t&&console.log(i);const r=eu(n);r?(r.innerHTML=i,ct(n),co(n),uo(n)):(nt(n),lt(n));li(n)}function te(i){const r=rt(i);ct(r);ci(r);fetch(pr+i,{method:"get"}).then(o).then(l).then(function(n){t&&console.log(n);ne(r,n)}).catch(n)}function ie(i){const r=i.attributes["data-id"].value;r==="0"?i.remove():fetch(vr+r,{method:"delete"}).then(c).then(function(n){t&&console.log(n);n.success?(ht(),i.remove()):ge(r,n)}).catch(n)}function re(n){t&&console.log(n);n.success?(d.hide(),fi()):we(n)}function ue(t){fetch(ar,{method:"post",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}}).then(c).then(re).catch(n)}function fe(n){t&&console.log(n);const u=n[0].id,i=rt(u),r=Array.from(n).filter(n=>n.name==="widgettitle")[0];r&&ee(i,r);lt(i);vu(i)||nt(i);hi(i)}function ee(n,t){const i=n.querySelector(yi);i&&(i.innerHTML=t.value)}function oe(t){let i={Settings:pu(t)};fetch(tu,{method:"post",body:JSON.stringify(i),headers:{"Content-Type":"application/json"}}).then(c).then(fe).catch(n)}function se(){const n=ti(),t=et();t.length>0?rf(n):uf(n)}function he(){const n=et();[].forEach.call(n,n=>{n.classList.remove("selected")})}function ce(n){const t=n.currentTarget.classList.contains("selected");he();t||n.currentTarget.classList.add("selected");se()}function le(){const t=au(),n=t.getElementsByTagName("A");for(let t=0;t<n.length;t++)new Tab(n[t],{})}function ae(){const n=et(),t=i(n[0]),r=g();pf(r.value,t)}function ve(){const n=ti();n.addEventListener("click",ae);[].forEach.call(yu(),n=>{n.addEventListener("click",ce)})}function ye(){le();ve()}function pe(n){const t=lu();nf(n);new Dropdown(document.getElementById(ur));oi();ei();ht();t.style="display:none"}function we(n){const t=f();[].forEach.call(n.LayoutErrors,n=>{const i=t.querySelector(`[data-id='${n.layoutRowId}']`);i.style=i?"outline: 1px solid #F00":""})}function be(){s=null;const n=[];[].forEach.call(ft(),(t,i)=>{const u=t.attributes["data-row-type"].value;let r=t.attributes["data-id"].value;r||(r="0");n.push({Index:i,LayoutRowId:r,TypeId:u})});const t={LayoutList:n,TabId:g().value};ue(t)}function ei(){const n=f(),t=du();t.addEventListener("click",be,!1);const i=n.querySelectorAll(gi);[].forEach.call(i,function(n){n.addEventListener("click",ke)});const r=n.querySelectorAll(bi);[].forEach.call(r,function(n){n.addEventListener("click",no)})}function ke(n){const t=n.target.attributes["data-id"].value;gf(t)}function de(n){ht();const t=ut();t.insertAdjacentHTML("beforeend",n);oi();ei()}function ht(){const t=f(),i=ft();[].forEach.call(i,function(n){n.style=""});const n=t.querySelector(wt);n&&(n.innerHTML="")}function ge(n,t){const i=f(),r=i.querySelector(`li[data-id='${n}']`),u=i.querySelector(wt);u.innerHTML=t.text;r.style="outline: 1px solid #F00"}function no(n){const t=st(n,"li");t&&ie(t)}function oi(){function i(n){n.target.parentNode.parentNode.setAttribute("draggable","true")}function r(n){n.target.parentNode.parentNode.setAttribute("draggable","false")}function u(n){n.stopPropagation&&n.stopPropagation();n.dataTransfer.effectAllowed="move";s=n.target;n.dataTransfer.setData("text/html",null)}function f(n){return n.preventDefault&&n.preventDefault(),n.stopPropagation&&n.stopPropagation(),n.dataTransfer.dropEffect="move",bu(n)&&(wu(s,n.target)?n.target.parentNode.insertBefore(s,n.target):n.target.parentNode.insertBefore(s,n.target.nextSibling),s.classList.remove("over")),!1}function e(n){n.target.setAttribute("draggable","false");s=null}const n=ut(),t=ft();[].forEach.call(t,function(n){const t=n.querySelector(nr);t.addEventListener("mousedown",i,!1);t.addEventListener("mouseup",r,!1)});n.addEventListener("dragstart",u,!1);n.addEventListener("dragover",f,!1);n.addEventListener("dragend",e,!1)}function si(n){const t=st(n,"button"),r=t.getAttribute("data-target"),u=t.getAttribute("id")===vt,f=t.getAttribute("id")===yt,i=document.querySelector(r);i&&(u&&(d||(d=new Modal(i)),d.show()),f&&(v||(v=new Modal(i)),v.show()))}function hi(n){ui(n)}function to(){const n=ni();[].forEach.call(n,n=>{hi(n)})}function io(n){const t=gu(n);if(t){const i=t.getElementsByClassName(ru).item(0);i&&i.addEventListener("click",hf,!1);const u=t.getElementsByClassName(iu).item(0);u&&u.addEventListener("click",ro,!1);const f=n.getElementsByClassName(r(fu)).item(0);f&&f.addEventListener("click",oo,!1);const e=n.getElementsByClassName(r(uu)).item(0);e&&e.addEventListener("click",so,!1)}}function ro(n){const t=e(n,u);if(t){const n=t.classList.contains(w);n?(t.classList.remove(w),nt(t),ri(t,0)):(t.classList.add(w),ct(t),ri(t,1))}}function uo(n){let t=n.querySelector(sr);t.addEventListener("click",eo,!1);let i=n.querySelector(or);i.addEventListener("click",fo,!1)}function fo(n){let t=e(n,u);t&&(lt(t),nt(t))}function eo(n){let t=e(n,u);t&&oe(t)}function oo(n){let t=e(n,u);t&&te(ou(t))}function so(n){const t=e(n,u);t&&ui(t)}function ho(){const n=y(),t=n.getElementsByClassName(fr);[].forEach.call(t,n=>{new Dropdown(n)});const i=ni();[].forEach.call(i,n=>{io(n)})}function ct(n){const t=n.querySelector(".card-body");t&&t.setAttribute("hidden","")}function nt(n){const t=n.querySelector(".card-body");t&&t.removeAttribute("hidden")}function ci(n){const t=n.querySelector(dt);t&&t.hasAttribute("hidden")&&t.removeAttribute("hidden")}function li(n){const t=n.querySelector(dt);t&&!t.hasAttribute("hidden")&&t.setAttribute("hidden","")}function co(n){const t=n.querySelector(it);t&&t.hasAttribute("hidden")&&t.removeAttribute("hidden")}function lt(n){const t=n.querySelector(it);t&&!t.hasAttribute("hidden")&&t.setAttribute("hidden","")}function lo(){const i=f();i.addEventListener("show.bs.modal",kf,!1);const r=document.getElementById(tt);r.addEventListener("show.bs.modal",vf,!1);const n=document.getElementById(vt);n&&n.addEventListener("click",si,!1);const t=document.getElementById(yt);t&&t.addEventListener("click",si,!1)}function ai(){ff();lo();ho();to()}const t=!1,a=".column",vi=".dashboard-tab",at=".row-template",u="card",yi=".card-title",vt="layout-button",yt="widget-button",pt=".modal-body",pi="layout-dialog",wi=".save-layout",bi=".layout-delete-button",ki=".layout-list",di="layout-item",gi=".layout-types a",nr=".handle",wt="#layout-message",tt="widget-dialog",tr=".widget-tabs",bt="a.widget-item",ir=".add-widget",rr="card-tools",kt=".overlay",dt=".overlay.loading-status",ur="btnLayoutDropdown",fr="dropdown-card-tool",er=".selected",it=".widget-settings",or=".settings-cancel",sr=".settings-save",hr=".setting-value",cr="/layoutdialog/",lr="/layoutdialog/addlayoutrow/",ar="/layoutdialog/saveLayout/",vr="/layoutdialog/DeleteLayoutRow/",yr="/widgetdialog/",pr="/widgetsettings/",wr="/widgetdialog/addwidget/",br="/Tuxboard/Get/",kr="/Tuxboard/PostCollapse/",dr="/Tuxboard/Put/",gr="/Tuxboard/removewidget/",nu="/Widget/",tu="/Widget/savesettings/",iu="collapse-widget",ru="remove-widget",w="collapsed",uu=".refresh-option",fu=".settings-option";let s=null,h=null,b=null,k=null,d=null,v=null;ai()})();